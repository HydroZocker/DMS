<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flower Watering Status</title>
    <script>
        function showUpdateForm(flowerId) {
            document.getElementById("update-form-" + flowerId).style.display = "block";
        }
    </script>
</head>

<body>
    <h2>Flower Watering Status</h2>

    <form action="/add_flower" method="post">
        <input type="text" name="name" placeholder="Flower Name">
        <input type="text" name="last_watered" placeholder="Last Water Date">
        <input type="number" name="water_level" placeholder="Water Level" >
        <input type="number" name="min_water_required" placeholder="Min Water Required" >
        <button type="submit">Add Flower</button>
    </form>

    <h3>Available Flowers</h3>
    <ul>
        {% if flowers %}
        {% for flower in flowers %}
        <li>
            {{ flower.id }} - <strong>{{ flower.name }}</strong>, 
        Last Watered: {{ flower.last_watered }}, 
        Water Level: {{ flower.water_level }}, 
        Min Water Required: {{ flower.min_water_required }}
        <br>
        
        <!-- Edit Button -->
        <button onclick="showUpdateForm({{ flower.id }})">Edit</button>

        <!-- Update Form (Initially Hidden) -->
        <form id="update-form-{{ flower.id }}" action="/update_flower/{{ flower.id }}" method="post" style="display: none;">
            <input type="text" name="name" value="{{ flower.name }}" required>
            <input type="date" name="last_watered" value="{{ flower.last_watered }}" required>
            <input type="number" name="water_level" value="{{ flower.water_level }}" required>
            <input type="number" name="min_water_required" value="{{ flower.min_water_required }}" required>
            <button type="submit">Update Flower</button>
        </form>

        <!-- DELETE Button (Sends DELETE request) -->
        <form action="{{ url_for('delete_flower', flower_id=flower.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this flower?');">
            <button type="submit" style="color: red;">Delete</button>
        </form>
        </li>
        {% endfor %}
        {% else %}
        <li>No flowers available.</li>
        {% endif %}
    </ul>
</body>

</html>
